:root{
	--ivm-backdrop: rgba(0,0,0,0.6);
	/* slightly transparent panel so page peeks through */
	--ivm-panel-bg: rgba(255,255,255,0.94);
	--ivm-panel-border: rgba(0,0,0,0.06);
	--ivm-close-color: #111827;
}

@media (prefers-color-scheme: dark){
	:root{
		--ivm-backdrop: rgba(0,0,0,0.75);
		/* slightly transparent dark panel so the dimmed page shows subtly */
		--ivm-panel-bg: rgba(11,18,32,0.86);
		--ivm-panel-border: rgba(255,255,255,0.06);
		--ivm-close-color: #e6eef8;
	}
}

.ivm-backdrop{position:fixed;inset:0;background:var(--ivm-backdrop);display:flex;align-items:center;justify-content:center;z-index:2000}
/* Keep the panel positioned relative inside the fixed backdrop and use flexbox centering
	to avoid transform-centering issues and subpixel offsets on mobile browsers. */
.ivm-panel{position:relative;width:auto;height:auto;padding:8px;border-radius:10px;background:var(--ivm-panel-bg);box-shadow:0 8px 24px rgba(0,0,0,.45);display:flex;flex-direction:column;align-items:center;border:1px solid var(--ivm-panel-border);overflow:hidden;max-width:92vw;max-height:88vh;transition:width .18s ease, height .18s ease}
/* subtle backdrop blur to improve contrast when panel is semi-transparent */
.ivm-panel{backdrop-filter: blur(4px);-webkit-backdrop-filter: blur(4px)}
.ivm-close{position:absolute;right:12px;top:12px;border:0;background:rgba(0,0,0,0.55);backdrop-filter: blur(4px);width:40px;height:40px;border-radius:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;font-weight:700;line-height:1;transition:background 120ms, transform 120ms}
.ivm-close:hover{background:rgba(0,0,0,0.7);transform:scale(1.04)}
.ivm-close:active{transform:scale(0.98)}
.ivm-close:focus{outline:2px solid rgba(59,130,246,0.25);box-shadow:0 4px 14px rgba(0,0,0,0.5)}

/* Light theme tweaks: make the close pill slightly darker so it shows against pale panels */
@media (prefers-color-scheme: light){
	.ivm-close{background:rgba(0,0,0,0.55);color:#fff}
	.ivm-close:hover{background:rgba(0,0,0,0.72)}
}

/* Dark theme tweaks: keep the pill dark but slightly translucent to contrast image */
@media (prefers-color-scheme: dark){
	.ivm-close{background:rgba(0,0,0,0.55);color:#fff}
	.ivm-close:hover{background:rgba(0,0,0,0.72)}
}

.ivm-close svg{display:block; width:24px !important; height:24px !important; color:inherit}
.ivm-close svg path{stroke:currentColor}

/* Large variant for a much bigger X */
.ivm-close--large{width:48px;height:48px;border-radius:24px;right:12px;top:12px}
.ivm-close--large svg{width:27px !important;height:27px !important}

/* Desktop: ensure the close pill and icon are larger (fix unexpected overrides on desktop) */
@media (min-width:1024px){
	.ivm-close--large{width:56px;height:56px;border-radius:28px;right:14px;top:14px}
	.ivm-close--large svg{width:32px !important;height:32px !important}
}
.ivm-content{display:flex;align-items:center;justify-content:center;overflow:hidden;padding:8px;box-sizing:border-box}

.ivm-content img{margin:0 auto}
/* Allow JS to control content sizing to guarantee full image visibility */
.ivm-panel{box-sizing:border-box}

/* Disable scrolling and ensure the image always scales to fit the panel. The image will
	never cause the panel to grow or show scrollbars; it will be letterboxed as needed. */
.ivm-content img{display:block;width:auto;height:auto;max-width:100%;max-height:100%;object-fit:contain;border-radius:6px}

/* Accessibility: when the panel is large on desktop, ensure the close pill sits above the image */
.ivm-close{z-index:2100}
