/* Elegant vertical modal for adding products
   - Vertical-first, max two items per row
   - Small, reusable styles using nmapm- prefix
*/

:root {
  /* Light theme (default) */
  --nmapm-backdrop: rgba(2,6,23,0.06);
  --nmapm-bg: #ffffff;
  --nmapm-surface: #f7fafc;
  --nmapm-text: #05121a; /* very dark text for max legibility */
  --nmapm-muted: rgba(5,18,26,0.78); /* stronger muted for labels/help text */
  --nmapm-border: rgba(11,18,32,0.18); /* clearer borders for inputs */
  --nmapm-divider: rgba(11,18,32,0.10);
  --nmapm-input-bg: #ffffff; /* input background on light */
  --nmapm-input-border: rgba(11,18,32,0.18);
  --nmapm-placeholder: rgba(11,18,32,0.60);
  --nmapm-focus: rgba(25,166,214,0.22);
  --nmapm-radius: 12px;
  --nmapm-gap: 14px;
  --nmapm-font-size: 14px; /* base font size for modal controls */
}

.price-input {
  margin-bottom: 0px !important;
}

.nmapm-adjusted-price {
  margin-left: 0.5rem;
  font-size: 0.9rem;
}

/* Dark theme overrides: follow system preference or explicit data-theme="dark" */
@media (prefers-color-scheme: dark) {
  :root {
    --nmapm-backdrop: rgba(4,8,16,0.6);
    --nmapm-bg: #0b1220;
    --nmapm-surface: #0f1724;
    --nmapm-text: #e6eef8;
    --nmapm-muted: rgba(230,238,248,0.72);
    --nmapm-border: rgba(255,255,255,0.10);
    --nmapm-divider: rgba(255,255,255,0.04);
    --nmapm-input-bg: rgba(255,255,255,0.02);
    --nmapm-input-border: rgba(255,255,255,0.08);
    --nmapm-placeholder: rgba(230,238,248,0.45);
    --nmapm-focus: rgba(25,166,214,0.16);
  }
}

/* Explicit data-theme attribute should override system preference when present */
[data-theme="dark"] {
  --nmapm-backdrop: rgba(4,8,16,0.6);
  --nmapm-bg: #0b1220;
  --nmapm-surface: #0f1724;
  --nmapm-text: #e6eef8;
  --nmapm-muted: rgba(230,238,248,0.36);
  --nmapm-border: rgba(255,255,255,0.04);
}
[data-theme="light"] {
  --nmapm-backdrop: rgba(2,6,23,0.06);
  --nmapm-bg: #ffffff;
  --nmapm-surface: #f7fafc;
  --nmapm-text: #05121a;
  --nmapm-muted: rgba(5,18,26,0.78);
  --nmapm-border: rgba(11,18,32,0.18);
  --nmapm-divider: rgba(11,18,32,0.10);
  --nmapm-input-bg: #ffffff;
  --nmapm-input-border: rgba(11,18,32,0.18);
  --nmapm-placeholder: rgba(11,18,32,0.60);
  --nmapm-focus: rgba(25,166,214,0.22);
}

.nmapm-backdrop {
  position: fixed; inset: 0; display:flex; align-items:center; justify-content:center; z-index:1500;
  background: var(--nmapm-backdrop);
  padding: 20px;
}

/* Defensive: prevent any horizontal scrolling caused by modal children */
.nmapm-backdrop { overflow-x: hidden; }

.nmapm-modal {
  width: 100%; max-width: 880px; background: var(--nmapm-bg); color: var(--nmapm-text); border-radius: var(--nmapm-radius); overflow:hidden; box-shadow: 0 20px 60px rgba(2,6,23,0.6);
  font-size: var(--nmapm-font-size);
}

/* Ensure modal never creates horizontal overflow from internal children */
.nmapm-modal { overflow-x: hidden; }

/* Last-resort clamps to absolutely prevent overflow (use sparingly) */
.nmapm-backdrop { overflow-x: hidden !important; }
.nmapm-modal { max-width: calc(100vw - 24px) !important; width: 100% !important; margin: 0 auto !important; }
.nmapm-previews .nmapm-thumb { width: min(96px, 26vw) !important; height: auto !important; }
.nmapm-previews .nmapm-thumb img { width: 100% !important; height: auto !important; object-fit: cover !important; }

/* Mobile safety: ensure modal never exceeds viewport width and children use border-box sizing */
@media (max-width: 720px) {
  .nmapm-modal {
    max-width: calc(100vw - 32px);
    width: 100%;
    box-sizing: border-box;
    margin: 0;
    border-radius: 10px;
  }
  .nmapm-modal, .nmapm-modal * { box-sizing: border-box; }
  .nmapm-backdrop { padding: 12px; }
}

.nmapm-header { display:flex; align-items:center; justify-content:space-between; padding:18px 20px; border-bottom:1px solid var(--nmapm-border); }
.nmapm-title { margin:0; font-weight:700; font-size:1.05rem; flex: 0 1 auto; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Defensive header button sizing: prevent global styles from making this full-width */
.nmapm-close {
  background: transparent;
  border: 0;
  color: var(--nmapm-text);
  font-size: 20px;
  cursor: pointer;
  flex: 0 0 40px; /* fixed square */
  width: 40px;
  height: 40px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  padding: 0;
}

/* If any global rule set buttons to width:100%, override it for header close */
.nmapm-header .nmapm-close[style], .nmapm-header .nmapm-close, .nmapm-header button { max-width: 48px; }

.nmapm-body {
  padding:18px 20px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 18px;
  max-height: 70vh;
  overflow: auto;
  align-items: start;
}

/* make row wrappers disappear for CSS grid so children (.nmapm-field) become grid items */
.nmapm-row { display: contents; }
.nmapm-row.single { display: contents; }
.nmapm-field { min-width:0; display:flex; flex-direction:column; gap:8px; }
.nmapm-field.full { grid-column: 1 / -1; }

.nmapm-label { color:var(--nmapm-muted); font-size:0.95rem; }
.nmapm-field input, .nmapm-field select { padding:0 12px; border-radius:8px; border:1px solid var(--nmapm-input-border); background: var(--nmapm-input-bg); color:var(--nmapm-text); height:44px; box-sizing:border-box; font-size:0.95rem; }
.nmapm-field input::placeholder { color: var(--nmapm-placeholder); }
.nmapm-field select { -webkit-appearance: none; -moz-appearance: none; appearance: none; }

/* Style native dropdown options for dark theme so they're readable */
.nmapm-field select option { background: var(--nmapm-surface); color: var(--nmapm-text); }
.nmapm-field select option:checked, .nmapm-field select option[selected] { background: var(--nmapm-surface); color: var(--nmapm-text); }
.nmapm-field select option:hover { background: rgba(255,255,255,0.03); color: var(--nmapm-text); }

/* Edge/IE expand arrow color fallback */
.nmapm-field select::-ms-expand { color: var(--nmapm-text); }

.nmapm-inline { display:flex; gap:10px; align-items:center; }
.nmapm-inline .nmapm-btn { white-space:nowrap; }

.nmapm-upload { display:flex; flex-direction:column; gap:8px; }
.nmapm-upload input[type="file"] { position:absolute; left:-9999px; }
.nmapm-upload-btn { padding:8px 12px; border-radius:8px; border:1px dashed var(--nmapm-input-border); background:transparent; color:var(--nmapm-text); cursor:pointer; height:44px; display:inline-flex; align-items:center; }
.nmapm-upload-hint { color:var(--nmapm-muted); font-size:0.85rem; }
.nmapm-previews { display:flex; gap:12px; margin-top:10px; justify-content:flex-start; align-items:center; }
.nmapm-upload { width:100%; box-sizing:border-box; overflow:hidden; }
.nmapm-upload-btn { max-width: 100%; box-sizing: border-box; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.nmapm-previews, .nmapm-previews * { max-width: 100%; box-sizing: border-box; }
.nmapm-previews { flex-wrap: wrap; }
.nmapm-previews .nmapm-thumb { flex: 0 0 auto; min-width: 0; max-width: 100%; }
.nmapm-previews img { max-width: 100%; height: auto; display: block; }
.nmapm-previews, .nmapm-previews * { max-width: 100%; box-sizing: border-box; }
.nmapm-previews { flex-wrap: wrap; }
.nmapm-previews .nmapm-thumb { flex: 0 0 auto; min-width: 0; }
.nmapm-previews img { max-width: 100%; height: auto; display: block; }
.nmapm-previews.center {
  /* center single-preview layouts and apply defensive, mobile-safe resets */
  -webkit-tap-highlight-color: transparent;
  text-size-adjust: 100%;
  line-height: var(--line-height);
  font-family: var(--font-family);
  text-rendering: optimizeLegibility;
  overflow-wrap: break-word;
  tab-size: 4;
  --totl-primary-background: rgba(255,255,255,.8);
  --totl-primary-font-color: #000;
  --totl-primate-font-descolor: #565656;
  --font-family: system-ui,-apple-system,"Segoe UI","Roboto","Ubuntu","Cantarell","Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
  --line-height: 1.5;
  --font-weight: 400;
  --font-size: 16px;
  --border-radius: 0.25rem;
  --border-width: 1px;
  --outline-width: 3px;
  --spacing: 1rem;
  --typography-spacing-vertical: 1.5rem;
  --block-spacing-vertical: calc(var(--spacing) * 2);
  --block-spacing-horizontal: var(--spacing);
  --grid-spacing-vertical: 0;
  --grid-spacing-horizontal: var(--spacing);
  --form-element-spacing-vertical: 0.75rem;
  --form-element-spacing-horizontal: 1rem;
  --nav-element-spacing-vertical: 1rem;
  --nav-element-spacing-horizontal: 0.5rem;
  --nav-link-spacing-vertical: 0.5rem;
  --nav-link-spacing-horizontal: 0.5rem;
  --form-label-font-weight: var(--font-weight);
  --transition: 0.2s ease-in-out;
  --modal-overlay-backdrop-filter: blur(0.25rem);
  --scrollbar-width: 0px;
  --nmapm-backdrop: rgba(2,6,23,0.06);
  --nmapm-bg: #ffffff;
  --nmapm-surface: #f7fafc;
  --nmapm-text: #05121a;
  --nmapm-muted: rgba(5,18,26,0.78);
  --nmapm-border: rgba(11,18,32,0.18);
  --nmapm-divider: rgba(11,18,32,0.10);
  --nmapm-input-bg: #ffffff;
  --nmapm-input-border: rgba(11,18,32,0.18);
  --nmapm-placeholder: rgba(11,18,32,0.60);
  --nmapm-focus: rgba(25,166,214,0.22);
  --nmapm-radius: 12px;
  --nmapm-gap: 14px;
  --nmapm-font-size: 14px;
  --ivm-backdrop: rgba(0,0,0,0.6);
  --ivm-panel-bg: rgba(255,255,255,0.94);
  --ivm-panel-border: rgba(0,0,0,0.06);
  --ivm-close-color: #111827;
  --inv-list-bg: var(--pico-card-background-color, #ffffff);
  --inv-list-border: var(--pico-muted-border-color, #e5e7eb);
  --inv-header-bg: color-mix(in srgb, var(--inv-list-bg), #000 2%);
  --inv-header-text: var(--pico-text-color, #111827);
  --lps-bg: var(--pico-background, #ffffff);
  --lps-surface: var(--pico-card-background, #ffffff);
  --lps-border: var(--pico-muted-border-color, #d3d6db);
  --lps-border-strong: #b8bcc2;
  --lps-text: var(--pico-color, #1d232b);
  --lps-text-dim: var(--pico-secondary-color, #5d6470);
  --lps-primary: var(--pico-primary, #2563eb);
  --lps-danger: #dc2626;
  --lps-radius: 14px;
  --lps-focus-ring: 0 0 0 2px color-mix(in srgb, var(--lps-primary) 50%, transparent);
  --lps-transition: .15s cubic-bezier(.4,.2,.2,1);
  --lps-row-height: 68px;
  --layer-navbar: 600;
  --layer-modal: 1500;
  --qty-btn-size: 36px;
  --qty-btn-bg: transparent;
  --qty-btn-border: rgba(0,0,0,0.08);
  --qty-btn-color: var(--c-text);
  --c-accent-rgb: 37 99 235;
  --c-radius: 14px;
  --c-radius-sm: 8px;
  --c-focus: 0 0 0 2px rgba(var(--c-accent-rgb)/.55);
  --c-transition: .18s cubic-bezier(.4,.2,.2,1);
  --layer-toast: 2500;
  --c-bg: #f5f7fa;
  --c-surface: #ffffff;
  --c-surface-alt: #f0f3f6;
  --c-border: #d3dde5;
  --c-border-soft: #e1e8ef;
  --c-text: #1f2a33;
  --c-text-dim: #5a6874;
  --c-accent: #2563eb;
  --c-danger: #c81e1e;
  --background-color: #fff;
  --color: hsl(205, 20%, 32%);
  --h1-color: hsl(205, 30%, 15%);
  --h2-color: #24333e;
  --h3-color: hsl(205, 25%, 23%);
  --h4-color: #374956;
  --h5-color: hsl(205, 20%, 32%);
  --h6-color: #4d606d;
  --muted-color: hsl(205, 10%, 50%);
  --muted-border-color: hsl(205, 20%, 94%);
  --primary: hsl(195, 85%, 41%);
  --primary-hover: hsl(195, 90%, 32%);
  --primary-focus: rgba(16, 149, 193, 0.125);
  --primary-inverse: #fff;
  --secondary: hsl(205, 15%, 41%);
  --secondary-hover: hsl(205, 20%, 32%);
  --secondary-focus: rgba(89, 107, 120, 0.125);
  --secondary-inverse: #fff;
  --contrast: hsl(205, 30%, 15%);
  --contrast-hover: #000;
  --contrast-focus: rgba(89, 107, 120, 0.125);
  --contrast-inverse: #fff;
  --mark-background-color: #fff2ca;
  --mark-color: #543a26;
  --ins-color: #388e3c;
  --del-color: #c62828;
  --blockquote-border-color: var(--muted-border-color);
  --blockquote-footer-color: var(--muted-color);
  --button-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  --button-hover-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  --form-element-background-color: transparent;
  --form-element-border-color: hsl(205, 14%, 68%);
  --form-element-color: var(--color);
  --form-element-placeholder-color: var(--muted-color);
  --form-element-active-background-color: transparent;
  --form-element-active-border-color: var(--primary);
  --form-element-focus-color: var(--primary-focus);
  --form-element-disabled-background-color: hsl(205, 18%, 86%);
  --form-element-disabled-border-color: hsl(205, 14%, 68%);
  --form-element-disabled-opacity: 0.5;
  --form-element-invalid-border-color: #c62828;
  --form-element-invalid-active-border-color: #d32f2f;
  --form-element-invalid-focus-color: rgba(211, 47, 47, 0.125);
  --form-element-valid-border-color: #388e3c;
  --form-element-valid-active-border-color: #43a047;
  --form-element-valid-focus-color: rgba(67, 160, 71, 0.125);
  --switch-background-color: hsl(205, 16%, 77%);
  --switch-color: var(--primary-inverse);
  --switch-checked-background-color: var(--primary);
  --range-border-color: hsl(205, 18%, 86%);
  --range-active-border-color: hsl(205, 16%, 77%);
  --range-thumb-border-color: var(--background-color);
  --range-thumb-color: var(--secondary);
  --range-thumb-hover-color: var(--secondary-hover);
  --range-thumb-active-color: var(--primary);
  --table-border-color: var(--muted-border-color);
  --table-row-stripped-background-color: #f6f8f9;
  --code-background-color: hsl(205, 20%, 94%);
  --code-color: var(--muted-color);
  --code-kbd-background-color: var(--contrast);
  --code-kbd-color: var(--contrast-inverse);
  --code-tag-color: hsl(330, 40%, 50%);
  --code-property-color: hsl(185, 40%, 40%);
  --code-value-color: hsl(40, 20%, 50%);
  --code-comment-color: hsl(205, 14%, 68%);
  --accordion-border-color: var(--muted-border-color);
  --accordion-close-summary-color: var(--color);
  --accordion-open-summary-color: var(--muted-color);
  --card-background-color: var(--background-color);
  --card-border-color: var(--muted-border-color);
  --card-box-shadow: 0.0145rem 0.029rem 0.174rem rgba(27, 40, 50, 0.01698),0.0335rem 0.067rem 0.402rem rgba(27, 40, 50, 0.024),0.0625rem 0.125rem 0.75rem rgba(27, 40, 50, 0.03),0.1125rem 0.225rem 1.35rem rgba(27, 40, 50, 0.036),0.2085rem 0.417rem 2.502rem rgba(27, 40, 50, 0.04302),0.5rem 1rem 6rem rgba(27, 40, 50, 0.06),0 0 0 0.0625rem rgba(27, 40, 50, 0.015);
  --card-sectionning-background-color: #fbfbfc;
  --dropdown-background-color: #fbfbfc;
  --dropdown-border-color: #e1e6eb;
  --dropdown-box-shadow: var(--card-box-shadow);
  --dropdown-color: var(--color);
  --dropdown-hover-background-color: hsl(205, 20%, 94%);
  --modal-overlay-background-color: rgba(213, 220, 226, 0.7);
  --progress-background-color: hsl(205, 18%, 86%);
  --progress-color: var(--primary);
  --loading-spinner-opacity: 0.5;
  --tooltip-background-color: var(--contrast);
  --tooltip-color: var(--contrast-inverse);
  --icon-checkbox: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(255, 255, 255)' stroke-width='4' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");
  --icon-chevron: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(65, 84, 98)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --icon-chevron-button: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(255, 255, 255)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --icon-chevron-button-inverse: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(255, 255, 255)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --icon-close: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(115, 130, 140)' stroke-width='4' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E");
  --icon-date: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(65, 84, 98)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Cline x1='16' y1='2' x2='16' y2='6'%3E%3C/line%3E%3Cline x1='8' y1='2' x2='8' y2='6'%3E%3C/line%3E%3Cline x1='3' y1='10' x2='21' y2='10'%3E%3C/line%3E%3C/svg%3E");
  --icon-invalid: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(198, 40, 40)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cline x1='12' y1='8' x2='12' y2='12'%3E%3C/line%3E%3Cline x1='12' y1='16' x2='12.01' y2='16'%3E%3C/line%3E%3C/svg%3E");
  color-scheme: light;
  color: var(--color);
  font-style: normal;
  font-size: var(--font-size);
  font-weight: var(--form-label-font-weight,var(--font-weight));
  background-repeat: no-repeat;
  background-attachment: initial!important;
  animation-duration: 1ms!important;
  animation-delay: -1ms!important;
  animation-iteration-count: 1!important;
  scroll-behavior: auto!important;
  transition-delay: 0s!important;
  transition-duration: 0s!important;
  display: flex;
  gap: 12px;
  margin-top: 10px;
  align-items: center;
  max-width: 100%;
  box-sizing: border-box;
  flex-wrap: wrap;
  background-color: transparent !important;
  justify-content: center;
}
.nmapm-thumb { width:120px; height:120px; border-radius:12px; overflow:hidden; box-shadow: 0 10px 30px rgba(2,6,23,0.36); background: transparent; display:flex; align-items:center; justify-content:center; border: none !important; }
.nmapm-thumb img { width:100%; height:100%; object-fit:cover; display:block; cursor:zoom-in; border: none !important; outline: none !important; background-color: transparent !important; padding: 0 !important; margin: 0 !important; }
.nmapm-previews, .nmapm-previews .nmapm-thumb, .nmapm-previews .nmapm-thumb img { background-color: transparent !important; }
.nmapm-thumb img:focus, .nmapm-thumb img:active { outline: none; }
.nmapm-thumb:focus, .nmapm-thumb:active { outline: none; }
.nmapm-thumb:hover { transform: translateY(-2px); box-shadow: 0 14px 36px rgba(2,6,23,0.42); }
.nmapm-thumb .nmapm-progress { position: absolute; left: 0; right: 0; bottom: 6px; display:flex; justify-content:center; }

.nmapm-section { display:flex; flex-direction:column; gap:12px; grid-column: 1 / -1; }

.nmapm-inventories { display:flex; flex-direction:column; gap:8px; grid-column: 1 / -1; }
.nmapm-inv-row { display:flex; gap:12px; align-items:center; justify-content:space-between; padding:8px 0; border-top:1px dashed var(--nmapm-divider); }
.nmapm-inv-controls { display:flex; gap:8px; align-items:center; }
.nmapm-inv-controls input { width:110px; padding:8px; height:44px; box-sizing:border-box; }

.nmapm-footer { padding:14px 20px; border-top:1px solid var(--nmapm-border); display:flex; gap:12px; align-items:center; justify-content:flex-end; grid-column: 1 / -1; }
.nmapm-actions { display:flex; gap:10px; align-items:center; margin-left: auto; }

/* Buttons */
/* Buttons: unify size, font and height to avoid uneven widths/heights */
.nmapm-btn { padding:0 14px; min-width:96px; height:44px; display:inline-flex; align-items:center; justify-content:center; border-radius:8px; border:1px solid var(--nmapm-border); background:transparent; color:var(--nmapm-text); cursor:pointer; font-size:0.95rem; box-sizing:border-box; }
.nmapm-btn.primary { background:#19a6d6; color:white; border-color:transparent; }
.nmapm-btn-ghost { background: var(--nmapm-surface); border:1px dashed var(--nmapm-input-border); color:var(--nmapm-text); }

/* Inline subform used when creating a new inventory inside the modal */
.nmapm-subform { display:block; margin-top:8px; }
.nmapm-subform input { padding:8px 10px; border-radius:8px; border:1px solid var(--nmapm-input-border); background:var(--nmapm-input-bg); color:var(--nmapm-text); height:40px; box-sizing:border-box; }
.nmapm-subform button { height:40px; padding:0 12px; border-radius:8px; }

/* Ensure inline controls don't collapse on small screens */
.nmapm-subform > div { display:flex; gap:8px; align-items:center; }
.nmapm-btn.danger { background:#dc2626; color:white; border-color:transparent; }

/* Size helpers: big primary on the right, small danger to avoid accidents */
.nmapm-btn.big, .nmapm-btn.small { /* normalize big/small to the same baseline so buttons are consistent */
  padding: 0 14px; height:44px; font-weight:600; border-radius:8px;
}

/* Defensive: prevent global button width rules from expanding buttons here */
.nmapm-actions button, .nmapm-actions .nmapm-btn { width: auto !important; max-width: none !important; flex: 0 0 auto !important; }

/* Confirm overlay */
.nmapm-confirm { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(2,6,23,0.5); z-index:1600; }
.nmapm-confirm-card { background:var(--nmapm-surface); color:var(--nmapm-text); padding:18px; border-radius:10px; box-shadow:0 8px 30px rgba(2,6,23,0.6); width: 420px; max-width:92%; }
.nmapm-confirm-text { margin-bottom:12px; font-weight:600; }
.nmapm-confirm-actions { display:flex; gap:8px; justify-content:flex-end; }

/* Small create-inventory modal (overlay) */
.nmapm-create-modal { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(2,6,23,0.45); z-index:1650; }
.nmapm-create-card { background:var(--nmapm-surface); color:var(--nmapm-text); padding:16px 18px; border-radius:10px; box-shadow:0 10px 40px rgba(2,6,23,0.6); width:420px; max-width:92%; }
.nmapm-create-card input { width:100%; }
.nmapm-create-actions .nmapm-btn { min-width:88px; }

/* Responsive: collapse to single column on small screens */
@media (max-width: 860px) {
  .nmapm-body { grid-template-columns: 1fr; }
  .nmapm-inline { flex-direction:column; align-items:stretch; }
  /* On small screens keep actions flow as before (no forced right alignment) */
  .nmapm-actions { margin-left: 0; justify-content: center; }
}

/* Small polish */
.nmapm-field input:focus, .nmapm-field select:focus { outline:2px solid var(--nmapm-focus); box-shadow: 0 4px 14px rgba(25,166,214,0.08); }

/* Accessibility helpers */
.nmapm-modal:focus { outline:none; }

.nmapm-input-percent {
  width: 6rem !important;
  display: inline-block;
  box-sizing: border-box;
}